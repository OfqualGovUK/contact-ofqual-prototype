
{% extends "_templates/form-template.html" %}

{% set pageHeading = "Make an enquiry" %}
{% set formAction = "./is-it-ao" %}

{% block formContent %}

  <span class="govuk-caption-l">Make an enquiry</span>
  <h1 class="govuk-heading-l">Search for the subject</h1>

  <div class="body-text">

    {# <p class="govuk-body">You can search for your subject by name or number, subject area and level.</p> #}
    <span class="govuk-hint">Maths, English or Biology for example</span>
    <div id="tt-default" class="autocomplete-wrapper govuk-!-width-full-width govuk-!-margin-top-2 govuk-!-margin-bottom-6 govuk-body"></div>
  </div>

  <a href="./is-it-ao" class="govuk-link govuk-body">I can't find the subject, skip this step</a>

  <script type="text/javascript" src="/public/javascripts/accessible-autocomplete.min.js"></script>

  <script type="text/javascript">
    var subjects = [
      {
        "id": "0",
        "name": "Biology",
      },
      {
        "id": "1",
        "name": "English",
      },
      {
        "id": "2",
        "name": "Maths",
      }
    ];

    var getSuggestions = () => {
      var suggestions = []
      subjects.forEach(result => suggestions.push(result.name));
      return suggestions;
    }
  </script>

  <script type="text/javascript">
    var element = document.querySelector('#tt-default')
    var id = 'autocomplete-default'
    accessibleAutocomplete({
      element: element,
      id: id,
      source: getSuggestions(),
      name: "subject",
      templates: {
        suggestion: (value) => {
          var result = subjects.find(result => result.name == value);
          return `<span class=''>${result.name}</span>`
        }
      }
    })
  </script>

  <div class="govuk-button-group govuk-!-margin-top-6">
    {{ govukButton({
      text: "Continue"
    }) }}
    <a class="govuk-link" href="./../frontdoor">Cancel</a>
  </div>

{% endblock %}
